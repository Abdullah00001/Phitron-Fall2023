<!-- head -->
{% extends "home/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block titleBlock %}{{cardetail.car_name}} Details{% endblock titleBlock %}
{% block custom_css %}
<link rel="stylesheet" href="{% static 'css/cardetails.css' %}">
{% endblock custom_css %}
<!-- head -->


<!-- body -->
{% block main_section %}
<section>
    <div class="container mx-auto p-5">
        <div class="card mx-auto datail-card-style">
            <img src="{{cardetail.car_image.url}}" class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="d-inline-block rounded-3 bg-black p-2 text-light">Brand : {{cardetail.car_brand}}</h5>
                <h3 class="card-title">{{cardetail.car_name}}</h3>
                <h5 class="card-title fw-bold mt-4">{{cardetail.car_title}}</h5>
                <p class="card-text">{{cardetail.car_description}}</p>
                <p class="">Quantity : {{cardetail.car_quantity}}</p>
                <p class=" fw-bold">Price : {{cardetail.car_price}}</p>
                {% if user.is_authenticated %}
                <a href="{% url 'payment' cardetail.id %}" class=" d-inline-block btn btn-primary">Buy Now</a>
                {% endif %}
                <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button"
                    aria-expanded="false" aria-controls="collapseExample">
                    Check Comments
                </a>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                    Write Comment
                </button>
                <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form method="post" novalidate>
                                    {% csrf_token %}
                                    {{comment_form|crispy}}
                                    <button class="btn btn-primary" type="submit">Comment</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="collapse" id="collapseExample">
                    <h4>Total Comments : {{comments|length}}</h4>
                    {% for cmnt in comments %}
                    <div class="card card-body mb-2">
                        <p>{{cmnt.user_name}}</p>
                        <small>{{cmnt.creation_time}}</small>
                        <h6>{{cmnt.comment_body}}</h6>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
</section>
{% endblock main_section %}
<!-- body -->


<!-- tale -->
{% block custom_JS %}{% endblock custom_JS %}
<!-- tale -->